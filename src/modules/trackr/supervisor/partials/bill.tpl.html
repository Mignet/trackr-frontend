<h1>{{ 'PAGES.SUPERVISOR.BILL.TITLE' | translate }}</h1>
<input type="text" class="form-control" ng-model="project"
       typeahead-on-select="loadWorktimes()"
       typeahead="project as getProjectLabel(project) for project in filterProjectsByNameAndIdentifier($viewValue)"
       typeahead-editable="false"/>

<div class="col-md-6">
    <p class="input-group">
        <input type="text" class="form-control" ng-model="start"
               datepicker-popup="yyyy-MM-dd"
               is-open="startOpened"
               close-text="{{ 'ACTIONS.CLOSE' | translate }}"
               current-text="{{ 'DATE.TODAY' | translate }}"
               toggle-weeks-text="{{ 'DATE.WEEKS' | translate }}"
               clear-text="{{ 'ACTIONS.CLEAR' | translate }}"/>
        <span class="input-group-btn">
            <button class="btn btn-default" ng-click="openDate($event, 'startOpened')"><i class="glyphicon glyphicon-calendar"></i></button>
        </span>
    </p>
</div>

<div class="col-md-6">
    <p class="input-group">
        <input type="text" class="form-control" ng-model="end"
               datepicker-popup="yyyy-MM-dd"
               is-open="stopOpened"
               close-text="{{ 'ACTIONS.CLOSE' | translate }}"
               current-text="{{ 'DATE.TODAY' | translate }}"
               toggle-weeks-text="{{ 'DATE.WEEKS' | translate }}"
               clear-text="{{ 'ACTIONS.CLEAR' | translate }}"/>
            <span class="input-group-btn">
                <button class="btn btn-default" ng-click="openDate($event, 'stopOpened')"><i class="glyphicon glyphicon-calendar"></i></button>
            </span>
    </p>
</div>

<tabset>
    <tab ng-repeat="(id, employee) in workTimes" heading="{{employee.name}}" ng-controller="trackr.supervisor.controllers.bill-create">
        <table class="table table-condensed table-bordered">
            <tr>
                <th>{{ 'BILLABLE_TIME.DATE' | translate }}</th>
                <th>{{ 'PAGES.SUPERVISOR.BILL.HOURS' | translate }}</th>
                <th colspan="2">{{ 'BILLABLE_TIME.BILLABLE_HOURS' | translate }}</th>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td><input class="form-control input-sm"
                           ng-change="setBillableHoursAll(billableHoursAll)"
                           ng-model="billableHoursAll" placeholder="{{ 'PAGES.SUPERVISOR.BILL.SET_ALL' | translate }}"/></td>
            </tr>
            <tr ng-repeat="workTime in employee.workTimes">
                <td>{{workTime.date}}</td>
                <td>{{workTime.minutes / 60}}</td>
                <td><input class="input-sm form-control" ng-model="workTime.hours" ng-change="recalculateBillableSum()"/></td>
                <td>
                    <span ng-if="workTime.posted" class="glyphicon" ng-class="{'glyphicon-warning-sign': workTime.error, 'glyphicon-ok-sign': !workTime.error}"></span>
                </td>
            </tr>
            <tr>
                <td><b>{{ 'PAGES.SUPERVISOR.BILL.SUM' | translate }}</b></td>
                <td>{{sumMinutes / 60}}</td>
                <td>{{sumBillableHours}}</td>
                <td></span></td>
            </tr>
        </table>
        <button type="button" class="btn btn-default" ng-click="createBill()">{{ 'ACTIONS.SAVE' | translate }}</button>
    </tab>
</tabset>