<h1>{{ 'INVOICE.INVOICES' | translate }}</h1>

<h3>{{ 'ACTIONS.SEARCH' | translate }}</h3>
<div class="form-group">
    <input type="text" ng-model="searchQuery" ng-change="executeSearch()"/>
</div>

<tabset>
    <tab ng-repeat="state in states">
        <tab-heading>
            {{ 'INVOICE.' + state | translate }} <span class="badge">{{invoices[state].page.totalElements}}</span>
        </tab-heading>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>{{ 'INVOICE.IDENTIFIER' | translate }}</th>
                <th>{{ 'INVOICE.CREATION_DATE' | translate }}</th>
                <th>{{ 'INVOICE.INVOICE_TOTAL' | translate }}</th>
                <th>{{ 'INVOICE.DEBITOR' | translate }}</th>
                <th>{{ 'INVOICE.DUE_DATE' | translate }}</th>
                <th>{{ 'INVOICE.STATE' | translate }}</th>
                <th>{{ 'ACTIONS.ACTIONS' | translate }}</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="invoice in invoices[state]">
                <td>{{invoice.identifier}}</td>
                <td>{{ invoice.creationDate | date:'dd.MM.yyyy' }}</td>
                <td>{{invoice.invoiceTotal}}</td>
                <td>TODO</td>
                <td>{{ invoice.dueDate | date:'dd.MM.yyyy' }}</td>
                <td>{{ 'INVOICE.' + invoice.invoiceState | translate }}</td>
                <td>
                    <button ng-show="state !== 'PAID'" ng-click="markPaid(invoice)" type="button" class="btn btn-default btn-xs">
                        <span class="glyphicon glyphicon-ok"></span>
                    </button>
                    <button ng-click="remove(invoice)" type="button" class="btn btn-default btn-xs">
                        <span class="glyphicon glyphicon-trash"></span>
                    </button>
                </td>
            </tr>
            </tbody>
        </table>
        <pagination class="pagination-sm" total-items="invoices[state].page.totalElements" ng-model="invoices[state].page.number" items-per-page="invoices[state].page.size"
                    ng-change="setPage(state)" max-size="5"></pagination>
    </tab>
</tabset>

<button type="button" class="btn btn-default" ng-click="addNew()">
    <span class="glyphicon glyphicon-plus"></span> {{ 'ACTIONS.NEW' | translate }}
</button>